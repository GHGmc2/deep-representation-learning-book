\documentclass{book}
\usepackage[margin=1in]{geometry}

% Font packages
\usepackage[utf8]{inputenc}
\usepackage{bbold}
\usepackage{pifont}

% Math packages 
\usepackage{amsmath}
\usepackage{amssymb}

% Figures and colors
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{float}
\usepackage{subcaption}

% Diagrams and images
\usepackage{tikz} % General diagram software
\usepackage{tikz-cd} % Commutative diagrams
\usepackage{pgfplots} % PGF plots; used to plot functions
\usetikzlibrary{automata, arrows, angles, calc, intersections, math, decorations.pathmorphing, decorations.markings}
\usetikzlibrary{positioning}
%% the following commands are needed for some matlab2tikz features
\usetikzlibrary{plotmarks}
\usetikzlibrary{arrows.meta}
\pgfplotsset{compat=1.16}
\usepgfplotslibrary{groupplots} % This lets you put multiple functions together in a single plot
\usepgfplotslibrary{patchplots}

% Tables
\usepackage{booktabs}

% References and bibliography
\usepackage[
backend=biber,
style=alphabetic,
sorting=nyt,
doi=false,
hyperref=true,
isbn=false,
sortcites,
url=false,
maxbibnames=99,
maxalphanames=3,
minalphanames=3,
maxcitenames=2,
mincitenames=1,
backref=false,
natbib=true,
]{biblatex}
\renewbibmacro{in:}{}
\AtEveryBibitem{%
  \clearlist{language}%
}
\providecommand{\toplevelprefix}{.}  % necessary for subfile compilation to work with bibliography
\makeatletter
% Hack to accommodate texlab users
\@ifundefined{thiscommandisneverdefined}{
  \addbibresource{\toplevelprefix/book-references.bib}
}{
  \addbibresource{book-references.bib}
}
\makeatother

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    citecolor={blue!80!black},
}
\usepackage{cleveref}
\crefname{assumption}{assumption}{assumptions}
\Crefname{assumption}{Assumption}{Assumptions}
\crefname{exercise}{exercise}{exercises}
\Crefname{exercise}{Exercise}{Exercises}

\hyphenation{line-break line-breaks docu-ment triangle cambridge amsthdoc
  cambridgemods baseline-skip author authors cambridgestyle en-vir-on-ment polar}

\setcounter{tocdepth}{2}% list subsections in the table of contents

% Algorithm packages -- should go after hyperref
\usepackage{algorithm}
% \usepackage[spaceRequire=false]{algpseudocodex}
\usepackage{algpseudocode}

% Math formatting
\usepackage{mathtools}
\usepackage{grffile}

% Text formatting
\usepackage[shortlabels]{enumitem}
\usepackage{fancyvrb}
\VerbatimFootnotes
\allowdisplaybreaks

% Custom packages for the book
\usepackage{math-macros}  % Custom package
\usepackage{math-theorems}  % Custom package
\usepackage{book-macros}  % Custom package for macros in the book

% Add subfiles --- each chapter can now be compiled by itself!
\usepackage{subfiles}

% Title page customization using titling package
\usepackage{titling}
\pretitle{\begin{center}\LARGE\bfseries}
\posttitle{\end{center}\vskip 0.5em}
\preauthor{\begin{center}\large}
\postauthor{\end{center}}
\predate{\begin{center}\large}
\postdate{\end{center}}

% Customize vertical spacing
\setlength{\droptitle}{-4em}

% Add a rule under the title
\renewcommand{\maketitlehooka}{%
  \vspace{1em}%
  \noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}%
  \vspace{1.5em}%
}

% Add space after author block
\renewcommand{\maketitlehookb}{%
  \vspace{2em}%
}

% Add space before date
\renewcommand{\maketitlehookc}{%
  \vspace{2em}%
}


\begin{document}

\title{Learning Deep Representations of Data Distributions}

\author{\vspace{0.5cm}
    \textbf{Sam Buchanan}, Toyota Technological Institute at Chicago \vspace{3mm}\\
    \textbf{Druv Pai}, University of California, Berkeley \vspace{3mm} \\
    \textbf{Peng Wang}, University of Michigan \& 
    University of Macau  \vspace{3mm} \\
    \textbf{Yi Ma},   University of California, Berkeley \& University of Hong Kong \vspace{10mm}\\
    with contributions from:\vspace{3mm}\\
    \textbf{Yaodong Yu},  University of Maryland, College Park
	\vspace{8cm}\\
	%\date{\large \today} \vspace{2cm} \\
	\footnotesize
	This manuscript is prepared for a course on the principles of deep learning
  and intelligence in general, to be taught by the authors at respective
  institutions. This pre-publication version is free to view and download for
  personal use only, and is not for redistribution, re-sale or use in derivative
  works.\\  Copyright \Pisymbol{psy}{227} 2025 Sam Buchanan, Druv Pai, Peng Wang, Yi
  Ma, Yaodong Yu
	%\footnotesize Copyright \Pisymbol{psy}{227}2020 Reserved \\ No
	%parts of this draft may be reproduced or distributed without written permission
	%from the authors.\\
}

\date{\large \today}

\frontmatter
\titlepage
\thispagestyle{empty}
\maketitle
\cleardoublepage

% \input{dedication.tex}
% \cleardoublepage

% \chapter*{Foreword}
% \addcontentsline{toc}{chapter}{Foreword}
% %\addcontentsline{toc}{chapter}{\numberline{}Foreword}
% \input{chapters/Foreword/foreword.tex}
% \cleardoublepage

% \addcontentsline{toc}{chapter}{Notation}
% \input{chapters/notation.tex}
% \cleardoublepage

\addcontentsline{toc}{chapter}{Preface}
\subfile{chapters/preface/preface.tex}
\cleardoublepage

\addcontentsline{toc}{chapter}{Declaration of Open Source}
\subfile{chapters/declaration/declaration.tex}
\cleardoublepage

\addcontentsline{toc}{chapter}{Acknowledgment}
\subfile{chapters/acknowledgment/acknowledgment.tex}
\cleardoublepage

% \chapter*{Acknowledgements}
% %\addcontentsline{toc}{chapter}{Acknowledgements}
 % \addcontentsline{toc}{chapter}{\numberline{}Acknowledgements}
% \input{chapters/Acknowledgement/acknowledgement.tex}
% \cleardoublepage

\tableofcontents
\cleardoublepage


\setcounter{page}{1}
\pagenumbering{arabic}


\mainmatter

\subfile{chapters/chapter1/introduction}

\subfile{chapters/chapter2/classic-models}

\subfile{chapters/chapter3/compression-principle}

\subfile{chapters/chapter4/deep-networks}

\subfile{chapters/chapter5/consistent}

\subfile{chapters/chapter6/conditional}

\subfile{chapters/chapter7/applications}

\subfile{chapters/chapter8/future}

\newpage

\appendix
%\part*{Appendices}
\addcontentsline{toc}{chapter}{Appendices}

\subfile{chapters/appendixA/optimization}

\subfile{chapters/appendixB/entropy}


\backmatter
%insert a blank line to the toc list
%\addtocontents{toc}{\vspace{\baselineskip}}

\addcontentsline{toc}{chapter}{Bibliography}
\printbibliography
\cleardoublepage


\end{document}
